<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Measuring Equity of Walkability: The Case of NYC Open Streets - Results</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Measuring Equity of Walkability: The Case of NYC Open Streets</span>
    </a>
  </div>
          <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about-me.html" rel="" target="">
 <span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./overview.html" rel="" target="">
 <span class="menu-text">Project Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./methodology.html" rel="" target="">
 <span class="menu-text">Methodology</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./results.html" rel="" target="" aria-current="page">
 <span class="menu-text">Results</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./conclusions.html" rel="" target="">
 <span class="menu-text">Conclusions</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./data-sources.html" rel="" target="">
 <span class="menu-text">Data Sources</span></a>
  </li>  
</ul>
          <div class="quarto-navbar-tools ms-auto">
</div>
            <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#spatial-distribution-of-opportunities-jobs-schools-health-on-the-h3-grid" id="toc-spatial-distribution-of-opportunities-jobs-schools-health-on-the-h3-grid" class="nav-link active" data-scroll-target="#spatial-distribution-of-opportunities-jobs-schools-health-on-the-h3-grid">1. Spatial Distribution of Opportunities (Jobs, Schools, Health) on the H3 Grid</a></li>
  <li><a href="#open-streets-distribution" id="toc-open-streets-distribution" class="nav-link" data-scroll-target="#open-streets-distribution">2. Open Streets Distribution</a></li>
  <li><a href="#normalized-accessibility-index-as_base_norm" id="toc-normalized-accessibility-index-as_base_norm" class="nav-link" data-scroll-target="#normalized-accessibility-index-as_base_norm">3. Normalized Accessibility Index (AS_base_norm)</a></li>
  <li><a href="#regression-analysis-predictors-of-open-streets-placement" id="toc-regression-analysis-predictors-of-open-streets-placement" class="nav-link" data-scroll-target="#regression-analysis-predictors-of-open-streets-placement">4. Regression Analysis: Predictors of Open Streets Placement</a></li>
  <li><a href="#equity-diagnostics" id="toc-equity-diagnostics" class="nav-link" data-scroll-target="#equity-diagnostics">5. Equity Diagnostics</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Results</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="spatial-distribution-of-opportunities-jobs-schools-health-on-the-h3-grid" class="level2">
<h2 class="anchored" data-anchor-id="spatial-distribution-of-opportunities-jobs-schools-health-on-the-h3-grid">1. Spatial Distribution of Opportunities (Jobs, Schools, Health) on the H3 Grid</h2>
<p>Although each opportunity type displays a distinct spatial pattern, all share a common tendency toward concentration in Manhattan and Northwest Brooklyn. Figure 3 illustrates the mapped distribution of the three social determinants and highlights clear spatial variation across the city. The income distribution map shows a strong clustering of the high-income households in Lower Manhattan, as well in parts of Northwest Brooklyn, particularly neighborhoods such as Williamsburg, DUMBO, and Brooklyn Heights.</p>
<p>The Jobs distribution map similarly reveals a high concentration in Manhattan. However, unlike income, job density extends more broadly into Downtown Brooklyn, the Bronx’s employment centers, and portions of western Queens near Long Island City. The spatial distribution of schools shows a different pattern: school facilities are most densely concentrated in the Bronx, followed by Brooklyn, with Manhattan. Despite variation in the specific locations of intensity, the three opportunity layers demonstrate that Manhattan and Northwest Brooklyn exhibit higher concentrations of key social determinants than the rest of New York City.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Income</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Jobs</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Schools</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p><img src="assets/figures/Figure_3_income.png" class="img-fluid"></p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p><img src="assets/figures/Figure_3_jobs.png" class="img-fluid"></p>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p><img src="assets/figures/Figure_3_schools.png" class="img-fluid"></p>
</div>
</div>
</div>
<p><em>Figure 3. Spatial distribution of income, jobs, and school accessibility on the H3 grid.</em></p>
</section>
<section id="open-streets-distribution" class="level2">
<h2 class="anchored" data-anchor-id="open-streets-distribution">2. Open Streets Distribution</h2>
<p>The spatial distribution of Open Streets follows the similar pattern observed in job opportunity distributions. As shown in Figure 4, Open Streets are heavily clustered in Lower Manhattan, Northwest Brooklyn, and the Jackson Heights area in Queens. In contrast, they are absent or appear at low density in outer-borough areas such as eastern Queens, southern Brooklyn, and Staten Island. Although the overall intensity of Open Streets is sparser than that of the opportunity variables, the program’s distribution similarly reflects a strong alignment with the lower Manhattan to Northwest Brooklyn corridor.</p>
<p><img src="assets/figures/Figure_4.png" class="img-fluid"></p>
<p><em>Figure 4. Spatial Distribution of Open Streets Length</em></p>
</section>
<section id="normalized-accessibility-index-as_base_norm" class="level2">
<h2 class="anchored" data-anchor-id="normalized-accessibility-index-as_base_norm">3. Normalized Accessibility Index (AS_base_norm)</h2>
<p>The common pattern between the distribution of opportunities and the distribution of Open Streets becomes even clearer when examining the normalized accessibility measure. Normalized accessibility represents each hexagon’s accessibility score that is derived from the cumulative opportunities within its k-ring catchment, and rescaled to a 0 - 1 range for comparability across variables. Figure 5, the normalized accessibility map shows a clear pattern of high accessibility extending through Manhattan, the Bronx, and Northwest Brooklyn, illustrated by the concentration of higher values (green shading). In contrast, areas with limited distributions of both opportunities and Open Streets appear with lower accessibility scores (yellow to red), reinforcing the raised concerns on the equity on the distribution. Taken together, these patterns raise the question of whether the concentration of Open Streets is directly correlated with underlying opportunity accessibility.</p>
<p><img src="assets/figures/Figure_5.png" class="img-fluid"></p>
<p><em>Figure 5. Normalized Accessibility (AS_base_norm) Distribution Across NYC</em></p>
</section>
<section id="regression-analysis-predictors-of-open-streets-placement" class="level2">
<h2 class="anchored" data-anchor-id="regression-analysis-predictors-of-open-streets-placement">4. Regression Analysis: Predictors of Open Streets Placement</h2>
<p>The two regression models directly address whether the shared spatial patterns observed in Manhattan and Northwest Brooklyn are statistically correlated with Open Streets placement. Together, they demonstrate that Open Streets are disproportionately concentrated in socioeconomically advantaged and high-access areas.</p>
<p>The first regression model examines the composite accessibility index, summarizing access to jobs, schools, and health facilities. This reveals significant relationships between Open Streets and both baseline accessibility and income. As shown in Table 2, baseline accessibility (AS_base) is a strong predictor of Open Street length (β = 793.84, p &lt; 0.001), indicating that areas with greater access to key opportunities host substantially more Open Streets.Median household income is also positively associated with Open Streets density (β = 0.0013, p = 0.002), suggesting that higher-income neighborhoods are more likely to receive program investment. Although the model’s explanatory power is modest (R² = 0.069), the consistency and significance of both predictors highlight a clear pattern: Open Streets are more prevalent in high-access, higher-income areas. These findings point to potential spatial inequities in the program’s implementation.</p>
<p>The second model disaggregates the components of accessibility to identify which opportunity types are most strongly associated with Open Streets placement. This determinant-specific regression shows that jobs and schools are the primary drivers of Open Streets distribution. Employment density is positively and significantly associated with Open Streets (β = 0.0037, p = 0.001), indicating a tendency for Open Streets to cluster in job-rich areas. School density exhibits the largest effect among all predictors (β = 38.20, p &lt; 0.001), suggesting a particularly strong relationship between educational institutions and program placement. In contrast, health facility density shows no significant association (p = 0.820), indicating that Open Streets do not systematically align with health-service accessibility. Median household income remains a significant positive predictor in the second model (β = 0.0013, p = 0.006), reinforcing evidence of socioeconomic disparities.</p>
<p>Taken together, the two models demonstrate that Open Streets are concentrated in job-dense, school-dense, and higher-income neighborhoods, highlighting equity concerns in the spatial distribution of the program.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Model 1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Model 2</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p><img src="assets/figures/Table_2.png" class="img-fluid"></p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p><img src="assets/figures/Table_3.png" class="img-fluid"></p>
</div>
</div>
</div>
<p><em>Table 2. OLS Regression Results of Composite Accessibility Model</em></p>
<p><em>Table 3. OLS Regression Results of Disaggregated Accessibility Model</em></p>
</section>
<section id="equity-diagnostics" class="level2">
<h2 class="anchored" data-anchor-id="equity-diagnostics">5. Equity Diagnostics</h2>
<p>The quartile analysis further reinforces the inequities identified in the regression models, showing that high-income and high-access neighborhoods systematically receive more Open Streets.</p>
<p>The first quartile analysis, grouping hexagons by income (Table 4), shows a clear upward trend of higher-income areas hosting more Open Streets on average. The highest-income quartile (Q4) contains approximately 194 meters of Open Streets, which is 54 percent more than the lowest-income quartile (Q1). Although the middle quartiles display some variation, the overall pattern indicates that Open Street infrastructure is disproportionately located in higher-income neighborhoods.</p>
<p>The disparities become even more pronounced when quartiles are grouped by baseline accessibility (AS_base), as shown in Table 5. Hexagons with the lowest accessibility (Q1) contain almost no Open Streets, averaging only 12 meters, whereas the highest-access quartile (Q4) contains an average of 321 meters. This represents a twenty-six-fold difference between the lowest- and highest-access areas. Such a stark contrast demonstrates that Open Streets have been disproportionately allocated to neighborhoods that already possess strong access to jobs, schools, and health facilities, further amplifying existing spatial advantages.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Quartile 1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Quartile 2</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p><img src="assets/figures/Table_4.png" class="img-fluid"></p>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<p><img src="assets/figures/Table_5.png" class="img-fluid"></p>
</div>
</div>
</div>
<p><em>Table 4. Mean Open Streets Length by Income Quartile</em></p>
<p><em>Table 5. Mean Open Streets Length by Accessibility Quartile</em></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Quartile 1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Quartile 2</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p><img src="assets/figures/Figure_6.png" class="img-fluid"></p>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<p><img src="assets/figures/Figure_7.png" class="img-fluid"></p>
</div>
</div>
</div>
<p><em>Figure 6. Bar Graph for Mean Open Streets Length by Income Quartile</em></p>
<p><em>Figure 7. Bar Graph for Mean Open Streets Length by Accessibility Quartile</em></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>